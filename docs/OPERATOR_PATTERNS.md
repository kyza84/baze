# OPERATOR_PATTERNS

## Назначение
Фиксирует базовые фразы оператора и ожидаемое поведение агента, чтобы при переносе между аккаунтами стиль работы сразу был одинаковым.

## Критичные триггеры (обязательные)
- `только ответ`
  - Никаких правок, запусков, рестартов и коммитов.
  - Только короткий фактологичный ответ по текущему вопросу.
- `ничего не меняй`
  - Только read-only проверка (логи/статус/метрики) и вердикт.
  - Никаких изменений файлов/процессов.
- `срежь логи`
  - Сделать срез по окну (если окно не задано: 30m и 60m).
  - Показать funnel, top reason codes, ключевые события.
- `перезапусти matrix`
  - Перезапуск только matrix runtime по активному профилю.
  - После запуска обязательная проверка: PID, `active_matrix.json`, поступление новых логов.
- `перезапусти обоих`
  - Перезапуск matrix runtime + runtime tuner.
  - После запуска обязательная проверка обоих процессов и записи в логах.
- `проверь что все ок`
  - Liveness процессов + короткий срез воронки + топ причин.
  - Вердикт: `OK` / `NOT_OK` с 1 primary bottleneck.
- `сделай коммит` / `пуш`
  - Коммитить только релевантные файлы задачи.
  - Runtime-логи не добавлять, если это не запрошено явно.

## Операционные правила ответа
- Если пользователь явно просит “просто/только ответ”:
  - не добавлять рекомендации, планы, тикеты, лишние блоки.
- Если пользователь просит “согласование”:
  - сначала список изменений и рисков, без применения.
  - применять только после явного подтверждения.
- Если пользователь просит “делай до конца”:
  - выполнить цикл: изменение -> проверка -> фиксация результата.

## Стандарт проверки после перезапуска
1. Процесс `main_local.py` жив (PID присутствует).
2. Процесс `matrix_runtime_tuner.py` жив (если должен быть активен).
3. `data/matrix/runs/active_matrix.json` отражает running/alive по факту.
4. В `logs/matrix/<profile>/` обновляются `app.log`, `trade_decisions.jsonl`, `runtime_tuner.jsonl`.

## Границы безопасности
- Не ослаблять hard anti-scam и safety без явного запроса.
- Не делать destructive git-команды.
- При сомнении сначала диагностика и evidence, потом изменение.
